'use client';
import { useState, useEffect } from 'react';
import { supabase } from '../../../lib/supabase';

export default function AdminLeads() {
  const [password, setPassword] = useState('');
  const [authenticated, setAuthenticated] = useState(false);
  const [leads, setLeads] = useState([]);

  useEffect(() => {
    if (authenticated) {
      supabase.from('leads').select('*').then(({ data }) => setLeads(data));
    }
  }, [authenticated]);

  if (!authenticated) {
    return (
      <div className="max-w-md mx-auto p-4">
        <input type="password" placeholder="Admin Password" value={password} onChange={(e) => setPassword(e.target.value)} className="p-3 border rounded w-full" />
        <button onClick={() => setAuthenticated(password ===